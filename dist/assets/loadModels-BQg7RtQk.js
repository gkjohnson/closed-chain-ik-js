import{f as Te,ac as Ce,ad as ye,ae as be,C as St,af as kt,G as Ie,u as se,X as nt,K as Dt,ag as re,ah as It,ab as xe,ai as ne,aj as Jt,M as ie,V as Tt,ak as je,F as Se,al as Fe,am as $t,h as oe,an as Le,ao as Ne,ap as ht,aq as pt,b as ft,ar as L}from"./IKRootsHelper-COUPCDCE.js";import{U as dt,u as gt,s as mt}from"./URDFLoader-BGE-E6rN.js";function Re(e){const t=new Map,s=[];for(let n=0,r=e.length;n<r;n++){const i=e[n],{name:o,dof:a,dofValues:l,dofTarget:u,dofRestPose:c,minDoFLimit:h,maxDoFLimit:p,targetSet:f,restPoseSet:b,position:v,quaternion:_,isClosure:S}=i;let k="Link";i.isGoal?k="Goal":i.isJoint&&(k="Joint");const $={dof:a?a.slice():null,dofValues:l?l.slice():null,dofTarget:u?u.slice():null,dofRestPose:c?c.slice():null,minDoFLimit:h?h.slice():null,maxDoFLimit:p?p.slice():null,targetSet:f,restPoseSet:b,isClosure:S,name:o,position:v.slice(),quaternion:_.slice(),children:null,closureJoints:null,child:null,type:k};s.push($),t.set(i,n)}for(let n=0,r=e.length;n<r;n++){const i=s[n],o=e[n];i.children=o.children.map(a=>t.get(a)),o.isLink&&(i.closureJoints=o.closureJoints.map(a=>t.get(a))),o.isJoint&&o.child&&(i.child=t.get(o.child)),o.parent?i.parent=t.get(o.parent):i.parent=null}return s}const Ot=304;function Ve(e,t=!0){let s;t?s=new SharedArrayBuffer(Ot*e.length):s=new ArrayBuffer(Ot*e.length);const n=new Float32Array(s),r=new Uint8Array(s);return Me(e,n,r),s}function Me(e,t,s,n=!0,r=!0){for(let i=0,o=e.length;i<o;i++)Ae(e[i],t,s,i*Ot,n,r)}function Ae(e,t,s,n,r=!0,i=!0){const o=n/4;if(i){const{position:a,quaternion:l}=e;for(let u=0;u<3;u++)t[o+0+u]=a[u];for(let u=0;u<4;u++)t[o+3+u]=l[u];if(e.isJoint){const{dofTarget:u,dofRestPose:c,minDoFLimit:h,maxDoFLimit:p,targetSet:f,restPoseSet:b}=e;for(let v=0;v<6;v++)t[o+7+0+v]=u[v],t[o+7+6+v]=c[v],t[o+7+12+v]=h[v],t[o+7+18+v]=p[v];s[n+148]=Number(f),s[n+149]=Number(b)}}if(r&&e.isJoint){const{dofValues:a}=e;for(let l=0;l<6;l++)t[o+7+24+l]=a[l]}}function Ue(e,t,s,n,r=!0,i=!0){const o=n/4;if(i&&(e.setPosition(t[o+0],t[o+1],t[o+2]),e.setQuaternion(t[o+3+0],t[o+3+1],t[o+3+2],t[o+3+3]),e.isJoint)){const{dofTarget:a,dofRestPose:l,minDoFLimit:u,maxDoFLimit:c}=e;for(let h=0;h<6;h++)a[h]=t[o+7+0+h],l[h]=t[o+7+6+h],u[h]=t[o+7+12+h],c[h]=t[o+7+18+h];e.targetSet=!!s[n+148],e.restPoseSet=!!s[n+149]}if(r&&e.isJoint){const{dofValues:a}=e;let l=!1;for(let u=0;u<6;u++){const c=t[o+7+24+u];c!==a[u]&&(a[u]=c,l=!0)}l&&e.setMatrixDoFNeedsUpdate()}}const At=typeof SharedArrayBuffer<"u";class Ys{constructor(t=[]){this.roots=Array.isArray(t)?[...t]:[t],this.status=[],this.running=!1,this.frames=null,this.buffer=null,this.floatBuffer=null,this.byteBuffer=null,this.jointsToUpdate=null,this.jointsToIndexMap=null,this.scheduledStateUpdate=!1;const s=new Worker(new URL(""+new URL("workerSolver.worker-DYKp2LK2.js",import.meta.url).href,import.meta.url),{type:"module"});let n=!1;s.onmessage=({data:r})=>{if(r.type==="updateSolve"){n||(n=!0,Promise.resolve().then(()=>{let o,a;At?(o=this.byteBuffer,a=this.floatBuffer):(o=new Uint8Array(r.data.buffer),a=new Float32Array(r.data.buffer));const{jointsToIndexMap:l,jointsToUpdate:u}=this;for(let c=0,h=u.length;c<h;c++){const p=u[c],f=l.get(p);Ue(p,a,o,f*Ot,!0,!1)}n=!1}));const i=r.data.status;this.status=i,i!==Te.TIMEOUT&&(this.running=!1)}},this.worker=s,this.updateStructure()}updateStructure(){const{worker:t}=this,s=Ce(this.roots),n=new Set;s.forEach(h=>h.traverse(p=>{n.add(p)}));const r=Array.from(n),i=Re(r),o=Ve(r,At),a=new Float32Array(o),l=new Uint8Array(o),u=[],c=new Map;for(let h=0,p=r.length;h<p;h++){const f=r[h];f.isJoint&&f.dof.length>0&&(u.push(f),c.set(f,h))}At?(this.buffer=o,this.floatBuffer=a,this.byteBuffer=l):(this.buffer=o.slice(),this.floatBuffer=new Float32Array(this.buffer),this.byteBuffer=new Uint8Array(this.buffer)),this.frames=r,this.jointsToUpdate=u,this.jointsToIndexMap=c,At?t.postMessage({type:"updateStructure",data:{serialized:i,buffer:o}}):t.postMessage({type:"updateStructure",data:{serialized:i,buffer:o}},[o])}updateSolverSettings(t){this.worker.postMessage({type:"updateSolverSettings",data:t})}updateFrameState(...t){const{frames:s,floatBuffer:n,byteBuffer:r}=this;if(t.length===0)Me(s,n,r,!1,!0);else for(let i=0,o=t.length;i<o;i++){const a=t[i],l=s.indexOf(a);Ae(a,n,r,Ot*l,!1,!0)}!At&&!this.scheduledStateUpdate&&(this.scheduledStateUpdate=!0,Promise.resolve().then(()=>{this.scheduledStateUpdate=!1;const i=this.buffer.slice();this.worker.postMessage({type:"updateFrameState",data:{buffer:i}},[i])}))}solve(){this.worker.postMessage({type:"startSolve"}),this.running=!0}stop(){this.worker.postMessage({type:"stopSolve"}),this.running=!1}dispose(){this.stop(),this.worker.terminate(),this.worker=null}}function Wt(e){const t=e.split(/[\\/]/g);return t.pop(),t.length===0?"./":t.join("/")+"/"}function Z(e,t,s=[]){e.tagName===t&&s.push(e);for(let n=0,r=e.children.length;n<r;n++){const i=e.children[n];Z(i,t,s)}return s}function Et(e,t){const s=e.cloneNode(),n=e.childNodes;for(let r=0,i=n.length;r<i;r++){const o=n[r],a=o.tagName;(!t||a!=="xacro:property"&&a!=="xacro:macro")&&s.appendChild(Et(o,t))}return s}function it(e){for(;e.length>0;){const t=e[e.length-1];if(t.nodeType!==t.ELEMENT_NODE)e.pop();else break}}function De(e){return/^[()/*+\-%|&=[\]]+$/.test(e)}function ae(e){return/^(('[^']*?')|("[^"]*?")|(`[^`]*?`))$/.test(e)}function Pt(e){return!isNaN(parseFloat(e))&&!/[^0-9.eE-]/.test(e)}function Je(e){const t=/(('[^']*?')|("[^"]*?")|(`[^`]*?`)|([()/*+\-%|&=[\]]+))/g;return e.replace(t,s=>` ${s} `).trim().split(/\s+/g)}function $e(e){return e.replace(/[-+]{2,}/,t=>{let s=!0;for(let n=0,r=t.length;n<r;n++)t[n]==="-"&&(s=!s);return s?"+":"-"})}const at=Symbol("parent");function zt(...e){const t={};for(let s=0,n=e.length;s<n;s++){const r=e[s];for(const i in r)t[i]=r[i];at in r&&(t[at]=r[at])}return t}function Be(e){const t=zt(e);return t[at]=e,t}var J="INUMBER",wt="IOP1",vt="IOP2",yt="IOP3",H="IVAR",et="IVARNAME",ut="IFUNCALL",Ft="IFUNDEF",R="IEXPR",Xt="IEXPREVAL",st="IMEMBER",Lt="IENDSTATEMENT",lt="IARRAY";function x(e,t){this.type=e,this.value=t??0}x.prototype.toString=function(){switch(this.type){case J:case wt:case vt:case yt:case H:case et:case Lt:return this.value;case ut:return"CALL "+this.value;case Ft:return"DEF "+this.value;case lt:return"ARRAY "+this.value;case st:return"."+this.value;default:return"Invalid Instruction"}};function Nt(e){return new x(wt,e)}function Y(e){return new x(vt,e)}function ke(e){return new x(yt,e)}function Gt(e,t,s,n,r){for(var i=[],o=[],a,l,u,c,h=0;h<e.length;h++){var p=e[h],f=p.type;if(f===J||f===et)Array.isArray(p.value)?i.push.apply(i,Gt(p.value.map(function(b){return new x(J,b)}).concat(new x(lt,p.value.length)),t,s,n,r)):i.push(p);else if(f===H&&r.hasOwnProperty(p.value))p=new x(J,r[p.value]),i.push(p);else if(f===vt&&i.length>1)l=i.pop(),a=i.pop(),c=s[p.value],p=new x(J,c(a.value,l.value)),i.push(p);else if(f===yt&&i.length>2)u=i.pop(),l=i.pop(),a=i.pop(),p.value==="?"?i.push(a.value?l.value:u.value):(c=n[p.value],p=new x(J,c(a.value,l.value,u.value)),i.push(p));else if(f===wt&&i.length>0)a=i.pop(),c=t[p.value],p=new x(J,c(a.value)),i.push(p);else if(f===R){for(;i.length>0;)o.push(i.shift());o.push(new x(R,Gt(p.value,t,s,n,r)))}else if(f===st&&i.length>0)a=i.pop(),i.push(new x(J,a.value[p.value]));else{for(;i.length>0;)o.push(i.shift());o.push(p)}}for(;i.length>0;)o.push(i.shift());return o}function Ee(e,t,s){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=i.type;if(o===H&&i.value===t)for(var a=0;a<s.tokens.length;a++){var l=s.tokens[a],u;l.type===wt?u=Nt(l.value):l.type===vt?u=Y(l.value):l.type===yt?u=ke(l.value):u=new x(l.type,l.value),n.push(u)}else o===R?n.push(new x(R,Ee(i.value,t,s))):n.push(i)}return n}function tt(e,t,s){var n=[],r,i,o,a,l,u;if(Kt(e))return K(e,s);for(var c=e.length,h=0;h<c;h++){var p=e[h],f=p.type;if(f===J||f===et)n.push(p.value);else if(f===vt)i=n.pop(),r=n.pop(),p.value==="and"?n.push(r?!!tt(i,t,s):!1):p.value==="or"?n.push(r?!0:!!tt(i,t,s)):p.value==="="?(a=t.binaryOps[p.value],n.push(a(r,tt(i,t,s),s))):(a=t.binaryOps[p.value],n.push(a(K(r,s),K(i,s))));else if(f===yt)o=n.pop(),i=n.pop(),r=n.pop(),p.value==="?"?n.push(tt(r?i:o,t,s)):(a=t.ternaryOps[p.value],n.push(a(K(r,s),K(i,s),K(o,s))));else if(f===H)if(p.value in t.functions)n.push(t.functions[p.value]);else if(p.value in t.unaryOps&&t.parser.isOperatorEnabled(p.value))n.push(t.unaryOps[p.value]);else{var b=s[p.value];if(b!==void 0)n.push(b);else throw new Error("undefined variable: "+p.value)}else if(f===wt)r=n.pop(),a=t.unaryOps[p.value],n.push(a(K(r,s)));else if(f===ut){for(u=p.value,l=[];u-- >0;)l.unshift(K(n.pop(),s));if(a=n.pop(),a.apply&&a.call)n.push(a.apply(void 0,l));else throw new Error(a+" is not a function")}else if(f===Ft)n.push((function(){for(var v=n.pop(),_=[],S=p.value;S-- >0;)_.unshift(n.pop());var k=n.pop(),$=function(){for(var V=Object.assign({},s),B=0,P=_.length;B<P;B++)V[_[B]]=arguments[B];return tt(v,t,V)};return Object.defineProperty($,"name",{value:k,writable:!1}),s[k]=$,$})());else if(f===R)n.push(qe(p,t));else if(f===Xt)n.push(p);else if(f===st)r=n.pop(),n.push(r[p.value]);else if(f===Lt)n.pop();else if(f===lt){for(u=p.value,l=[];u-- >0;)l.unshift(n.pop());n.push(l)}else throw new Error("invalid Expression")}if(n.length>1)throw new Error("invalid Expression (parity)");return n[0]===0?0:K(n[0],s)}function qe(e,t,s){return Kt(e)?e:{type:Xt,value:function(n){return tt(e.value,t,n)}}}function Kt(e){return e&&e.type===Xt}function K(e,t){return Kt(e)?e.value(t):e}function Ht(e,t){for(var s=[],n,r,i,o,a,l,u=0;u<e.length;u++){var c=e[u],h=c.type;if(h===J)typeof c.value=="number"&&c.value<0?s.push("("+c.value+")"):Array.isArray(c.value)?s.push("["+c.value.map(ue).join(", ")+"]"):s.push(ue(c.value));else if(h===vt)r=s.pop(),n=s.pop(),o=c.value,t?o==="^"?s.push("Math.pow("+n+", "+r+")"):o==="and"?s.push("(!!"+n+" && !!"+r+")"):o==="or"?s.push("(!!"+n+" || !!"+r+")"):o==="||"?s.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+r+")))"):o==="=="?s.push("("+n+" === "+r+")"):o==="!="?s.push("("+n+" !== "+r+")"):o==="["?s.push(n+"[("+r+") | 0]"):s.push("("+n+" "+o+" "+r+")"):o==="["?s.push(n+"["+r+"]"):s.push("("+n+" "+o+" "+r+")");else if(h===yt)if(i=s.pop(),r=s.pop(),n=s.pop(),o=c.value,o==="?")s.push("("+n+" ? "+r+" : "+i+")");else throw new Error("invalid Expression");else if(h===H||h===et)s.push(c.value);else if(h===wt)n=s.pop(),o=c.value,o==="-"||o==="+"?s.push("("+o+n+")"):t?o==="not"?s.push("(!"+n+")"):o==="!"?s.push("fac("+n+")"):s.push(o+"("+n+")"):o==="!"?s.push("("+n+"!)"):s.push("("+o+" "+n+")");else if(h===ut){for(l=c.value,a=[];l-- >0;)a.unshift(s.pop());o=s.pop(),s.push(o+"("+a.join(", ")+")")}else if(h===Ft){for(r=s.pop(),l=c.value,a=[];l-- >0;)a.unshift(s.pop());n=s.pop(),t?s.push("("+n+" = function("+a.join(", ")+") { return "+r+" })"):s.push("("+n+"("+a.join(", ")+") = "+r+")")}else if(h===st)n=s.pop(),s.push(n+"."+c.value);else if(h===lt){for(l=c.value,a=[];l-- >0;)a.unshift(s.pop());s.push("["+a.join(", ")+"]")}else if(h===R)s.push("("+Ht(c.value,t)+")");else if(h!==Lt)throw new Error("invalid Expression")}return s.length>1&&(t?s=[s.join(",")]:s=[s.join(";")]),String(s[0])}function ue(e){return typeof e=="string"?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function ot(e,t){for(var s=0;s<e.length;s++)if(e[s]===t)return!0;return!1}function Qt(e,t,s){s=s||{};for(var n=!!s.withMembers,r=null,i=0;i<e.length;i++){var o=e[i];o.type===H||o.type===et?!n&&!ot(t,o.value)?t.push(o.value):(r!==null&&(ot(t,r)||t.push(r)),r=o.value):o.type===st&&n&&r!==null?r+="."+o.value:o.type===R?Qt(o.value,t,s):r!==null&&(ot(t,r)||t.push(r),r=null)}r!==null&&!ot(t,r)&&t.push(r)}function W(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}W.prototype.simplify=function(e){return e=e||{},new W(Gt(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)};W.prototype.substitute=function(e,t){return t instanceof W||(t=this.parser.parse(String(t))),new W(Ee(this.tokens,e,t),this.parser)};W.prototype.evaluate=function(e){return e=e||{},tt(this.tokens,this,e)};W.prototype.toString=function(){return Ht(this.tokens,!1)};W.prototype.symbols=function(e){e=e||{};var t=[];return Qt(this.tokens,t,e),t};W.prototype.variables=function(e){e=e||{};var t=[];Qt(this.tokens,t,e);var s=this.functions;return t.filter(function(n){return!(n in s)})};W.prototype.toJSFunction=function(e,t){var s=this,n=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+Ht(this.simplify(t).tokens,!0)+"; }");return function(){return n.apply(s,arguments)}};var _t="TEOF",T="TOP",Rt="TNUMBER",Pe="TSTRING",Q="TPAREN",ct="TBRACKET",Vt="TCOMMA",Yt="TNAME",Zt="TSEMICOLON";function Oe(e,t,s){this.type=e,this.value=t,this.index=s}Oe.prototype.toString=function(){return this.type+": "+this.value};function j(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}j.prototype.newToken=function(e,t,s){return new Oe(e,t,s??this.pos)};j.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current};j.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent};j.prototype.next=function(){if(this.pos>=this.expression.length)return this.newToken(_t,"EOF");if(this.isWhitespace()||this.isComment())return this.next();if(this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName())return this.current;this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')};j.prototype.isString=function(){var e=!1,t=this.pos,s=this.expression.charAt(t);if(s==="'"||s==='"')for(var n=this.expression.indexOf(s,t+1);n>=0&&this.pos<this.expression.length;){if(this.pos=n+1,this.expression.charAt(n-1)!=="\\"){var r=this.expression.substring(t+1,n);this.current=this.newToken(Pe,this.unescape(r),t),e=!0;break}n=this.expression.indexOf(s,n+1)}return e};j.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return e==="("||e===")"?(this.current=this.newToken(Q,e),this.pos++,!0):!1};j.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return(e==="["||e==="]")&&this.isOperatorEnabled("[")?(this.current=this.newToken(ct,e),this.pos++,!0):!1};j.prototype.isComma=function(){var e=this.expression.charAt(this.pos);return e===","?(this.current=this.newToken(Vt,","),this.pos++,!0):!1};j.prototype.isSemicolon=function(){var e=this.expression.charAt(this.pos);return e===";"?(this.current=this.newToken(Zt,";"),this.pos++,!0):!1};j.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var s=this.expression.charAt(t);if(s.toUpperCase()===s.toLowerCase()&&(t===this.pos||s!=="_"&&s!=="."&&(s<"0"||s>"9")))break}if(t>e){var n=this.expression.substring(e,t);if(n in this.consts)return this.current=this.newToken(Rt,this.consts[n]),this.pos+=n.length,!0}return!1};j.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var s=this.expression.charAt(t);if(s.toUpperCase()===s.toLowerCase()&&(t===this.pos||s!=="_"&&(s<"0"||s>"9")))break}if(t>e){var n=this.expression.substring(e,t);if(this.isOperatorEnabled(n)&&(n in this.binaryOps||n in this.unaryOps||n in this.ternaryOps))return this.current=this.newToken(T,n),this.pos+=n.length,!0}return!1};j.prototype.isName=function(){for(var e=this.pos,t=e,s=!1;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()){if(t===this.pos&&(n==="$"||n==="_")){n==="_"&&(s=!0);continue}else if(t===this.pos||!s||n!=="_"&&(n<"0"||n>"9"))break}else s=!0}if(s){var r=this.expression.substring(e,t);return this.current=this.newToken(Yt,r),this.pos+=r.length,!0}return!1};j.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);(t===" "||t==="	"||t===`
`||t==="\r")&&(e=!0,this.pos++,!(this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var We=/^[0-9a-f]{4}$/i;j.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var s=e.substring(0,t);t>=0;){var n=e.charAt(++t);switch(n){case"'":s+="'";break;case'"':s+='"';break;case"\\":s+="\\";break;case"/":s+="/";break;case"b":s+="\b";break;case"f":s+="\f";break;case"n":s+=`
`;break;case"r":s+="\r";break;case"t":s+="	";break;case"u":var r=e.substring(t+1,t+5);We.test(r)||this.parseError("Illegal escape sequence: \\u"+r),s+=String.fromCharCode(parseInt(r,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+n+'"')}++t;var i=e.indexOf("\\",t);s+=e.substring(t,i<0?e.length:i),t=i}return s};j.prototype.isComment=function(){var e=this.expression.charAt(this.pos);return e==="/"&&this.expression.charAt(this.pos+1)==="*"?(this.pos=this.expression.indexOf("*/",this.pos)+2,this.pos===1&&(this.pos=this.expression.length),!0):!1};j.prototype.isRadixInteger=function(){var e=this.pos;if(e>=this.expression.length-2||this.expression.charAt(e)!=="0")return!1;++e;var t,s;if(this.expression.charAt(e)==="x")t=16,s=/^[0-9a-f]$/i,++e;else if(this.expression.charAt(e)==="b")t=2,s=/^[01]$/i,++e;else return!1;for(var n=!1,r=e;e<this.expression.length;){var i=this.expression.charAt(e);if(s.test(i))e++,n=!0;else break}return n&&(this.current=this.newToken(Rt,parseInt(this.expression.substring(r,e),t)),this.pos=e),n};j.prototype.isNumber=function(){for(var e=!1,t=this.pos,s=t,n=t,r=!1,i=!1,o;t<this.expression.length&&(o=this.expression.charAt(t),o>="0"&&o<="9"||!r&&o===".");)o==="."?r=!0:i=!0,t++,e=i;if(e&&(n=t),o==="e"||o==="E"){t++;for(var a=!0,l=!1;t<this.expression.length;){if(o=this.expression.charAt(t),a&&(o==="+"||o==="-"))a=!1;else if(o>="0"&&o<="9")l=!0,a=!1;else break;t++}l||(t=n)}return e?(this.current=this.newToken(Rt,parseFloat(this.expression.substring(s,t))),this.pos=t):this.pos=n,e};j.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if(t==="+"||t==="-"||t==="*"||t==="/"||t==="%"||t==="^"||t==="?"||t===":"||t===".")this.current=this.newToken(T,t);else if(t==="∙"||t==="•")this.current=this.newToken(T,"*");else if(t===">")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(T,">="),this.pos++):this.current=this.newToken(T,">");else if(t==="<")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(T,"<="),this.pos++):this.current=this.newToken(T,"<");else if(t==="|")if(this.expression.charAt(this.pos+1)==="|")this.current=this.newToken(T,"||"),this.pos++;else return!1;else if(t==="=")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(T,"=="),this.pos++):this.current=this.newToken(T,t);else if(t==="!")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(T,"!="),this.pos++):this.current=this.newToken(T,t);else return!1;return this.pos++,this.isOperatorEnabled(this.current.value)?!0:(this.pos=e,!1)};j.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)};j.prototype.getCoordinates=function(){var e=0,t,s=-1;do e++,t=this.pos-s,s=this.expression.indexOf(`
`,s+1);while(s>=0&&s<this.pos);return{line:e,column:t}};j.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)};function I(e,t,s){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=s.allowMemberAccess!==!1}I.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()};I.prototype.tokenMatches=function(e,t){return typeof t>"u"?!0:Array.isArray(t)?ot(t,e.value):typeof t=="function"?t(e):e.value===t};I.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()};I.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken};I.prototype.accept=function(e,t){return this.nextToken.type===e&&this.tokenMatches(this.nextToken,t)?(this.next(),!0):!1};I.prototype.expect=function(e,t){if(!this.accept(e,t)){var s=this.tokens.getCoordinates();throw new Error("parse error ["+s.line+":"+s.column+"]: Expected "+(t||e))}};I.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;function s(r){return r.value in t}if(this.accept(Yt)||this.accept(T,s))e.push(new x(H,this.current.value));else if(this.accept(Rt))e.push(new x(J,this.current.value));else if(this.accept(Pe))e.push(new x(J,this.current.value));else if(this.accept(Q,"("))this.parseExpression(e),this.expect(Q,")");else if(this.accept(ct,"["))if(this.accept(ct,"]"))e.push(new x(lt,0));else{var n=this.parseArrayList(e);e.push(new x(lt,n))}else throw new Error("unexpected "+this.nextToken)};I.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),!this.parseUntilEndStatement(e,t)&&this.pushExpression(e,t))};I.prototype.pushExpression=function(e,t){for(var s=0,n=t.length;s<n;s++)e.push(t[s])};I.prototype.parseUntilEndStatement=function(e,t){return this.accept(Zt)?(this.nextToken&&this.nextToken.type!==_t&&!(this.nextToken.type===Q&&this.nextToken.value===")")&&t.push(new x(Lt)),this.nextToken.type!==_t&&this.parseExpression(t),e.push(new x(R,t)),!0):!1};I.prototype.parseArrayList=function(e){for(var t=0;!this.accept(ct,"]");)for(this.parseExpression(e),++t;this.accept(Vt);)this.parseExpression(e),++t;return t};I.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(T,"=");){var t=e.pop(),s=[],n=e.length-1;if(t.type===ut){if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var r=0,i=t.value+1;r<i;r++){var o=n-r;e[o].type===H&&(e[o]=new x(et,e[o].value))}this.parseVariableAssignmentExpression(s),e.push(new x(R,s)),e.push(new x(Ft,t.value));continue}if(t.type!==H&&t.type!==st)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(s),e.push(new x(et,t.value)),e.push(new x(R,s)),e.push(Y("="))}};I.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(T,"?");){var t=[],s=[];this.parseConditionalExpression(t),this.expect(T,":"),this.parseConditionalExpression(s),e.push(new x(R,t)),e.push(new x(R,s)),e.push(ke("?"))}};I.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(T,"or");){var t=[];this.parseAndExpression(t),e.push(new x(R,t)),e.push(Y("or"))}};I.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(T,"and");){var t=[];this.parseComparison(t),e.push(new x(R,t)),e.push(Y("and"))}};var ze=["==","!=","<","<=",">=",">","in"];I.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(T,ze);){var t=this.current;this.parseAddSub(e),e.push(Y(t.value))}};var Ge=["+","-","||"];I.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(T,Ge);){var t=this.current;this.parseTerm(e),e.push(Y(t.value))}};var Xe=["*","/","%"];I.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(T,Xe);){var t=this.current;this.parseFactor(e),e.push(Y(t.value))}};I.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;function s(r){return r.value in t}if(this.save(),this.accept(T,s)){if(this.current.value!=="-"&&this.current.value!=="+"){if(this.nextToken.type===Q&&this.nextToken.value==="("){this.restore(),this.parseExponential(e);return}else if(this.nextToken.type===Zt||this.nextToken.type===Vt||this.nextToken.type===_t||this.nextToken.type===Q&&this.nextToken.value===")"){this.restore(),this.parseAtom(e);return}}var n=this.current;this.parseFactor(e),e.push(Nt(n.value))}else this.parseExponential(e)};I.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(T,"^");)this.parseFactor(e),e.push(Y("^"))};I.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(T,"!");)e.push(Nt("!"))};I.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;function s(i){return i.value in t}if(this.accept(T,s)){var n=this.current;this.parseAtom(e),e.push(Nt(n.value))}else for(this.parseMemberExpression(e);this.accept(Q,"(");)if(this.accept(Q,")"))e.push(new x(ut,0));else{var r=this.parseArgumentList(e);e.push(new x(ut,r))}};I.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(Q,")");)for(this.parseExpression(e),++t;this.accept(Vt);)this.parseExpression(e),++t;return t};I.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(T,".")||this.accept(ct,"[");){var t=this.current;if(t.value==="."){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(Yt),e.push(new x(st,this.current.value))}else if(t.value==="["){if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(ct,"]"),e.push(Y("["))}else throw new Error("unexpected symbol: "+t.value)}};function Ke(e,t){return Number(e)+Number(t)}function He(e,t){return e-t}function Qe(e,t){return e*t}function Ye(e,t){return e/t}function Ze(e,t){return e%t}function ts(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function es(e,t){return e===t}function ss(e,t){return e!==t}function rs(e,t){return e>t}function ns(e,t){return e<t}function is(e,t){return e>=t}function os(e,t){return e<=t}function as(e,t){return!!(e&&t)}function us(e,t){return!!(e||t)}function ls(e,t){return ot(t,e)}function cs(e){return(Math.exp(e)-Math.exp(-e))/2}function hs(e){return(Math.exp(e)+Math.exp(-e))/2}function ps(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function fs(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function ds(e){return Math.log(e+Math.sqrt(e*e-1))}function gs(e){return Math.log((1+e)/(1-e))/2}function le(e){return Math.log(e)*Math.LOG10E}function ms(e){return-e}function ws(e){return!e}function vs(e){return e<0?Math.ceil(e):Math.floor(e)}function ys(e){return Math.random()*(e||1)}function ce(e){return te(e+1)}function bs(e){return isFinite(e)&&e===Math.round(e)}var xs=4.7421875,Bt=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function te(e){var t,s;if(bs(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var n=e-2,r=e-1;n>1;)r*=n,n--;return r===0&&(r=1),r}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*te(1-e));if(e>=171.35)return 1/0;if(e>85){var i=e*e,o=i*e,a=o*e,l=a*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*i)-139/(51840*o)-571/(2488320*a)+163879/(209018880*l)+5246819/(75246796800*l*e))}--e,s=Bt[0];for(var u=1;u<Bt.length;++u)s+=Bt[u]/(e+u);return t=e+xs+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*s}function Ms(e){return Array.isArray(e)?e.length:String(e).length}function he(){for(var e=0,t=0,s=0;s<arguments.length;s++){var n=Math.abs(arguments[s]),r;t<n?(r=t/n,e=e*r*r+1,t=n):n>0?(r=n/t,e+=r*r):e+=n}return t===1/0?1/0:t*Math.sqrt(e)}function pe(e,t,s){return e?t:s}function As(e,t){return typeof t>"u"||+t==0?Math.round(e):(e=+e,t=-+t,isNaN(e)||!(typeof t=="number"&&t%1===0)?NaN:(e=e.toString().split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t))),e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+t:t))))}function ks(e,t,s){return s&&(s[e]=t),t}function Es(e,t){return e[t|0]}function Ps(e){return arguments.length===1&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function Os(e){return arguments.length===1&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function _s(e,t){if(typeof e!="function")throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map(function(s,n){return e(s,n)})}function Ts(e,t,s){if(typeof e!="function")throw new Error("First argument to fold is not a function");if(!Array.isArray(s))throw new Error("Second argument to fold is not an array");return s.reduce(function(n,r,i){return e(n,r,i)},t)}function Cs(e,t){if(typeof e!="function")throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter(function(s,n){return e(s,n)})}function Is(e,t){if(!(Array.isArray(t)||typeof t=="string"))throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function js(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function Ss(e){return(e>0)-(e<0)||+e}var fe=1/3;function Fs(e){return e<0?-Math.pow(-e,fe):Math.pow(e,fe)}function Ls(e){return Math.exp(e)-1}function Ns(e){return Math.log(1+e)}function Rs(e){return Math.log(e)/Math.LN2}function rt(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||cs,cosh:Math.cosh||hs,tanh:Math.tanh||ps,asinh:Math.asinh||fs,acosh:Math.acosh||ds,atanh:Math.atanh||gs,sqrt:Math.sqrt,cbrt:Math.cbrt||Fs,log:Math.log,log2:Math.log2||Rs,ln:Math.log,lg:Math.log10||le,log10:Math.log10||le,expm1:Math.expm1||Ls,log1p:Math.log1p||Ns,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||vs,"-":ms,"+":Number,exp:Math.exp,not:ws,length:Ms,"!":ce,sign:Math.sign||Ss},this.binaryOps={"+":Ke,"-":He,"*":Qe,"/":Ye,"%":Ze,"^":Math.pow,"||":ts,"==":es,"!=":ss,">":rs,"<":ns,">=":is,"<=":os,and:as,or:us,in:ls,"=":ks,"[":Es},this.ternaryOps={"?":pe},this.functions={random:ys,fac:ce,min:Os,max:Ps,hypot:Math.hypot||he,pyt:Math.hypot||he,pow:Math.pow,atan2:Math.atan2,if:pe,gamma:te,roundTo:As,map:_s,fold:Ts,filter:Cs,indexOf:Is,join:js},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}rt.prototype.parse=function(e){var t=[],s=new I(this,new j(this,e),{allowMemberAccess:this.options.allowMemberAccess});return s.parseExpression(t),s.expect(_t,"EOF"),new W(t,this)};rt.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var _e=new rt;rt.parse=function(e){return _e.parse(e)};rt.evaluate=function(e,t){return _e.parse(e).evaluate(t)};var de={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};function Vs(e){return de.hasOwnProperty(e)?de[e]:e}rt.prototype.isOperatorEnabled=function(e){var t=Vs(e),s=this.options.operators||{};return!(t in s)||!!s[t]};const G=new rt;G.unaryOps={"-":G.unaryOps["-"],"+":G.unaryOps["+"],"!":G.unaryOps["!"]};G.functions={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,log:Math.log,atan2:Math.atan2,pow:Math.pow,radians:e=>e*(Math.PI/180),degrees:e=>e*(180/Math.PI)};G.binaryOps={...G.binaryOps,"+":(e,t)=>(Pt(e)&&(e=Number(e)),Pt(t)&&(t=Number(t)),e+t),in:(e,t)=>Array.isArray(t)||typeof t=="string"?t.includes(e):e in t};G.consts={...G.consts,pi:Math.PI,e:Math.E};function Us(e){return G.evaluate(e)}class Ds{constructor(){this.inOrder=!0,this.requirePrefix=!0,this.localProperties=!0,this.rospackCommands={},this.workingPath=""}async getFileContents(t){throw new Error("XacroParser: getFileContents() not implemented.")}async parse(t){function s(d,g,A=!1){function y(w,O){return typeof w=="number"?w:w.replace(/(\$?\$\([^)]+\))|(\$?\${[^}]+})/g,F=>{if(/^\$\$/.test(F))return F;const X=/^\$\(/.test(F);let M=F.substring(2,F.length-1);if(M=y(M,O),X){const q=y(M,O).split(/\s+/g),U=q.shift();try{return $(U,...q)}catch(Mt){throw new Error(`XacroParser: Cannot run rospack command "${M}".
`+Mt.message)}}else{if(E.includes(M))throw new Error(`XacroParser: Cannot evaluate infinitely recursive expression: ${E.join(" > ")} > ${M}`);E.push(M);const z=/(()|()|()|[()/*+\-%|&=[\]])+/g,q=Je(M).map(U=>{if(z.lastIndex=0,De(U)||Pt(U)||ae(U))return U;if(U in O){const Mt=y(O[U],O);return Pt(Mt)?Mt:`"${Mt.toString().replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}else return U}).join("");if(E.pop(),ae(q))return q.substring(1,q.length-1);if(Pt(q))return q;{const U=$e(q);return V(U)}}})}const E=[],m=zt(k,g);try{let w=y(d,m);return A&&(w=w.replace(/\${2}([({])/g,(O,C)=>`$${C}`)),w}catch(w){throw new Error(`XacroParser: Failed to process expression "${d}". 
`+w.message)}}async function n(d,g,A,y){const E=d.tagName.replace(/^xacro:/,""),m=A[E];if(!m)throw new Error(`XacroParser: Cannot find macro "${E}"`);const w=g,O=A;g=Be(g),A=zt(A);let C=[];for(const M of d.children)await o(M,w,O,C);C=C.filter(M=>M.nodeType===M.ELEMENT_NODE);let F=0;for(const M in m.params){const z=m.params[M];d.hasAttribute(M)?g[M]=s(d.getAttribute(M),w):z.type==="BLOCK"?(g[M]=[C[F]],F++):z.type==="MULTI_BLOCK"?g[M]=[...C.filter(q=>q.tagName===M)[0].childNodes]:g[M]=s(m.params[M].def,w)}const X=[...m.node.childNodes];for(const M of X){const z=[];await o(M,g,A,z),y.push(...z)}}function r(d){const g={};if(/^\*\*/.test(d)?g.type="MULTI_BLOCK":/^\*/.test(d)?g.type="BLOCK":g.type="PARAM",d=d.replace(/^\*{1,2}/g,""),/:=/.test(d)){const[A,y]=d.split(":=");if(/^\^/.test(y)||/\|/.test(y))throw new Error(`XacroParser: ROS Jade pass-through notation not supported in macro defaults: ${y}`);g.name=A,g.def=y}else g.name=d,g.def=null;return g}function i(d){const g=d.getAttribute("name").replace(/^xacro:/,""),A=d.getAttribute("params"),y={};return A&&A.trim().split(/\s+/g).map(m=>r(m)).forEach(m=>{y[m.name]=m}),{name:g,node:Et(d,!1),params:y}}async function o(d,g,A,y=[]){if(d.nodeType!==d.ELEMENT_NODE){const m=d.cloneNode();m.textContent=s(m.textContent,g,!0),y.push(m);return}let E=d.tagName.toLowerCase();if(!b)switch(E){case"arg":case"property":case"macro":case"insert_block":case"if":case"unless":case"include":case"element":case"attribute":E=`xacro:${E}`;break;default:E in A&&(E=`xacro:${E}`);break}switch(E){case"xacro:property":{it(y);const m=d.getAttribute("name");let w;if(d.hasAttribute("value"))w=d.getAttribute("value");else if(d.hasAttribute("default"))w=d.getAttribute("default");else{const C=[...d.childNodes];w=[];for(const F of C)w.push(Et(F,!1))}let O="global";B&&(O=d.getAttribute("scope")||"local"),O!=="local"&&(w=s(w,g)),O==="global"?k[m]=w:O==="parent"?g[at][m]=w:g[m]=w;break}case"xacro:macro":{it(y);const m=i(d);A[m.name]=m;break}case"xacro:insert_block":{it(y);const m=d.getAttribute("name"),w=g[m];for(const O of w)await o(O,g,A,y);return}case"xacro:if":case"xacro:unless":{it(y);const m=s(d.getAttribute("value"),g,!0);let w=null;if(isNaN(parseFloat(m))?m==="true"||m==="false"?w=m==="true":w=m:w=!!parseFloat(m),E==="xacro:unless"&&(w=!w),w){const O=[...d.childNodes];for(const C of O)await o(C,g,A,y)}return}case"xacro:include":{if(it(y),d.hasAttribute("ns"))throw new Error("XacroParser: xacro:include name spaces not supported.");const m=s(d.getAttribute("filename"),g,!0),O=/^[/\\]/.test(m)||/^[a-zA-Z]+:[/\\]/.test(m)?m:P+m,C=P;P=Wt(O);const X=[...(await u(O)).children[0].childNodes];for(const M of X)await o(M,g,A,y);P=C;return}case"xacro:arg":case"xacro:attribute":case"xacro:element":throw new Error(`XacroParser: ${E} tags not supported.`);default:{if(/^xacro:/.test(E)||E in A)return it(y),n(d,g,A,y);{const m=d.cloneNode();for(let C=0,F=m.attributes.length;C<F;C++){const X=m.attributes[C],M=s(X.value,g,!0);m.setAttribute(X.name,M)}const w=[...d.childNodes],O=[];for(let C=0,F=w.length;C<F;C++)await o(w[C],g,A,O);O.forEach(C=>m.appendChild(C)),y.push(m)}}}}async function a(d,g,A){const y=Z(d,"xacro:property");b||y.push(...Z(d,"property"));for(const m of y)await o(m,g,A);const E=Z(d,"xacro:macro");b||E.push(...Z(d,"macro"));for(const m of E)await o(m,g,A)}async function l(d,g,A){const y=d.cloneNode();for(let E=0,m=d.children.length;E<m;E++){const w=[];await o(d.children[E],g,A,w);const O=w[0];O.removeAttribute("xmlns:xacro"),y.appendChild(O)}return y}async function u(d){try{const g=await h.getFileContents(d);return new DOMParser().parseFromString(g,"text/xml")}catch{throw new Error(`XacroParser: Could not load included file: ${d}`)}}async function c(d,g,A=[]){const y=Z(d,"xacro:include");b||y.push(...Z(d,"include"));const E=y.map(m=>{if(m.hasAttribute("ns"))throw new Error("XacroParser: xacro:include name spaces not supported.");const w=m.getAttribute("filename"),O=m.getAttribute("ns")||null,F=/^[/\\]/.test(w)||/^[a-zA-Z]+:[/\\]/.test(w)?w:g+w;return u(F).then(M=>{A.push({filename:w,namespace:O,content:M});const z=Wt(F);return c(M,z,A)})});return await Promise.all(E),A}const h=this,p=this.inOrder,f=this.workingPath+(this.workingPath&&!/[\\/]$/.test(this.workingPath)?"/":""),b=this.requirePrefix,v=this.rospackCommands,_={},S={},k={True:1,False:0};k[at]=k;const $=(d,...g)=>v instanceof Function?v(d,...g):v[d](...g),V=Us;let B=this.localProperties,P=f,N=new DOMParser().parseFromString(t,"text/xml");B&&!p&&(console.warn('XacroParser: Implicitly setting "localProperties" option to false because "inOrder" is false.'),B=!1);let Ut=null;return p?Ut=Promise.resolve():Ut=(async function(){return await a(N,k,_),N=Et(N,!0),c(N,f).then(d=>{d.forEach(g=>{a(g.content,k,_),g.content=Et(g.content,!0),S[g.filename]=g.content})})})(),await Ut,l(N,k,_)}}class Js extends Ds{constructor(){super(),this.fetchOptions={}}load(t,s,n){const r=Wt(t);this.workingPath===""&&(this.workingPath=r),this.getFileContents(t).then(i=>{this.parse(i,s,n)}).catch(i=>{n&&n(i)})}parse(t,s,n){super.parse(t).then(s).catch(r=>{n&&n(r)})}getFileContents(t){return fetch(t,this.fetchOptions).then(s=>{if(s.ok)return s.text();throw new Error(`XacroLoader: Failed to load url '${t}' with error code ${s.status} : ${s.statusText}.`)})}}const $s=/^[og]\s*(.+)?/,Bs=/^mtllib /,qs=/^usemtl /,Ws=/^usemap /,ge=/\s+/,me=new Tt,qt=new Tt,we=new Tt,ve=new Tt,D=new Tt,jt=new St;function zs(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,s){if(this.object&&this.object.fromDeclaration===!1){this.object.name=t,this.object.fromDeclaration=s!==!1;return}const n=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:s!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,i){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(i)&&i.length>0?i[i.length-1]:"",smooth:o!==void 0?o.smooth:this.smooth,groupStart:o!==void 0?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const u={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return u.clone=this.clone.bind(u),u}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const i=this.currentMaterial();if(i&&i.groupEnd===-1&&(i.groupEnd=this.geometry.vertices.length/3,i.groupCount=i.groupEnd-i.groupStart,i.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),i}},n&&n.name&&typeof n.clone=="function"){const r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(t,s){const n=parseInt(t,10);return(n>=0?n-1:n+s/3)*3},parseNormalIndex:function(t,s){const n=parseInt(t,10);return(n>=0?n-1:n+s/3)*3},parseUVIndex:function(t,s){const n=parseInt(t,10);return(n>=0?n-1:n+s/2)*2},addVertex:function(t,s,n){const r=this.vertices,i=this.object.geometry.vertices;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[s+0],r[s+1],r[s+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(t){const s=this.vertices;this.object.geometry.vertices.push(s[t+0],s[t+1],s[t+2])},addVertexLine:function(t){const s=this.vertices;this.object.geometry.vertices.push(s[t+0],s[t+1],s[t+2])},addNormal:function(t,s,n){const r=this.normals,i=this.object.geometry.normals;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[s+0],r[s+1],r[s+2]),i.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(t,s,n){const r=this.vertices,i=this.object.geometry.normals;me.fromArray(r,t),qt.fromArray(r,s),we.fromArray(r,n),D.subVectors(we,qt),ve.subVectors(me,qt),D.cross(ve),D.normalize(),i.push(D.x,D.y,D.z),i.push(D.x,D.y,D.z),i.push(D.x,D.y,D.z)},addColor:function(t,s,n){const r=this.colors,i=this.object.geometry.colors;r[t]!==void 0&&i.push(r[t+0],r[t+1],r[t+2]),r[s]!==void 0&&i.push(r[s+0],r[s+1],r[s+2]),r[n]!==void 0&&i.push(r[n+0],r[n+1],r[n+2])},addUV:function(t,s,n){const r=this.uvs,i=this.object.geometry.uvs;i.push(r[t+0],r[t+1]),i.push(r[s+0],r[s+1]),i.push(r[n+0],r[n+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const s=this.uvs;this.object.geometry.uvs.push(s[t+0],s[t+1])},addFace:function(t,s,n,r,i,o,a,l,u){const c=this.vertices.length;let h=this.parseVertexIndex(t,c),p=this.parseVertexIndex(s,c),f=this.parseVertexIndex(n,c);if(this.addVertex(h,p,f),this.addColor(h,p,f),a!==void 0&&a!==""){const b=this.normals.length;h=this.parseNormalIndex(a,b),p=this.parseNormalIndex(l,b),f=this.parseNormalIndex(u,b),this.addNormal(h,p,f)}else this.addFaceNormal(h,p,f);if(r!==void 0&&r!==""){const b=this.uvs.length;h=this.parseUVIndex(r,b),p=this.parseUVIndex(i,b),f=this.parseUVIndex(o,b),this.addUV(h,p,f),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const s=this.vertices.length;for(let n=0,r=t.length;n<r;n++){const i=this.parseVertexIndex(t[n],s);this.addVertexPoint(i),this.addColor(i)}},addLineGeometry:function(t,s){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let i=0,o=t.length;i<o;i++)this.addVertexLine(this.parseVertexIndex(t[i],n));for(let i=0,o=s.length;i<o;i++)this.addUVLine(this.parseUVIndex(s[i],r))}};return e.startObject("",!1),e}class Gs extends ye{constructor(t){super(t),this.materials=null}load(t,s,n,r){const i=this,o=new be(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(a){try{s(i.parse(a))}catch(l){r?r(l):console.error(l),i.manager.itemError(t)}},n,r)}setMaterials(t){return this.materials=t,this}parse(t){const s=new zs;t.indexOf(`\r
`)!==-1&&(t=t.replace(/\r\n/g,`
`)),t.indexOf(`\\
`)!==-1&&(t=t.replace(/\\\n/g,""));const n=t.split(`
`);let r=[];for(let a=0,l=n.length;a<l;a++){const u=n[a].trimStart();if(u.length===0)continue;const c=u.charAt(0);if(c!=="#")if(c==="v"){const h=u.split(ge);switch(h[0]){case"v":s.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(jt.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6]),kt),s.colors.push(jt.r,jt.g,jt.b)):s.colors.push(void 0,void 0,void 0);break;case"vn":s.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":s.uvs.push(parseFloat(h[1]),parseFloat(h[2]));break}}else if(c==="f"){const p=u.slice(1).trim().split(ge),f=[];for(let v=0,_=p.length;v<_;v++){const S=p[v];if(S.length>0){const k=S.split("/");f.push(k)}}const b=f[0];for(let v=1,_=f.length-1;v<_;v++){const S=f[v],k=f[v+1];s.addFace(b[0],S[0],k[0],b[1],S[1],k[1],b[2],S[2],k[2])}}else if(c==="l"){const h=u.substring(1).trim().split(" ");let p=[];const f=[];if(u.indexOf("/")===-1)p=h;else for(let b=0,v=h.length;b<v;b++){const _=h[b].split("/");_[0]!==""&&p.push(_[0]),_[1]!==""&&f.push(_[1])}s.addLineGeometry(p,f)}else if(c==="p"){const p=u.slice(1).trim().split(" ");s.addPointGeometry(p)}else if((r=$s.exec(u))!==null){const h=(" "+r[0].slice(1).trim()).slice(1);s.startObject(h)}else if(qs.test(u))s.object.startMaterial(u.substring(7).trim(),s.materialLibraries);else if(Bs.test(u))s.materialLibraries.push(u.substring(7).trim());else if(Ws.test(u))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(c==="s"){if(r=u.split(" "),r.length>1){const p=r[1].trim().toLowerCase();s.object.smooth=p!=="0"&&p!=="off"}else s.object.smooth=!0;const h=s.object.currentMaterial();h&&(h.smooth=s.object.smooth)}else{if(u==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+u+'"')}}s.finalize();const i=new Ie;if(i.materialLibraries=[].concat(s.materialLibraries),!(s.objects.length===1&&s.objects[0].geometry.vertices.length===0)===!0)for(let a=0,l=s.objects.length;a<l;a++){const u=s.objects[a],c=u.geometry,h=u.materials,p=c.type==="Line",f=c.type==="Points";let b=!1;if(c.vertices.length===0)continue;const v=new se;v.setAttribute("position",new nt(c.vertices,3)),c.normals.length>0&&v.setAttribute("normal",new nt(c.normals,3)),c.colors.length>0&&(b=!0,v.setAttribute("color",new nt(c.colors,3))),c.hasUVIndices===!0&&v.setAttribute("uv",new nt(c.uvs,2));const _=[];for(let k=0,$=h.length;k<$;k++){const V=h[k],B=V.name+"_"+V.smooth+"_"+b;let P=s.materials[B];if(this.materials!==null){if(P=this.materials.create(V.name),p&&P&&!(P instanceof Dt)){const N=new Dt;re.prototype.copy.call(N,P),N.color.copy(P.color),P=N}else if(f&&P&&!(P instanceof It)){const N=new It({size:10,sizeAttenuation:!1});re.prototype.copy.call(N,P),N.color.copy(P.color),N.map=P.map,P=N}}P===void 0&&(p?P=new Dt:f?P=new It({size:1,sizeAttenuation:!1}):P=new xe,P.name=V.name,P.flatShading=!V.smooth,P.vertexColors=b,s.materials[B]=P),_.push(P)}let S;if(_.length>1){for(let k=0,$=h.length;k<$;k++){const V=h[k];v.addGroup(V.groupStart,V.groupCount,k)}p?S=new ne(v,_):f?S=new Jt(v,_):S=new ie(v,_)}else p?S=new ne(v,_[0]):f?S=new Jt(v,_[0]):S=new ie(v,_[0]);S.name=u.name,i.add(S)}else if(s.vertices.length>0){const a=new It({size:1,sizeAttenuation:!1}),l=new se;l.setAttribute("position",new nt(s.vertices,3)),s.colors.length>0&&s.colors[0]!==void 0&&(l.setAttribute("color",new nt(s.colors,3)),a.vertexColors=!0);const u=new Jt(l,a);i.add(u)}return i}}class Xs extends ye{constructor(t){super(t)}load(t,s,n,r){const i=this,o=this.path===""?je.extractUrlBase(t):this.path,a=new be(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){try{s(i.parse(l,o))}catch(u){r?r(u):console.error(u),i.manager.itemError(t)}},n,r)}setMaterialOptions(t){return this.materialOptions=t,this}parse(t,s){const n=t.split(`
`);let r={};const i=/\s+/,o={};for(let l=0;l<n.length;l++){let u=n[l];if(u=u.trim(),u.length===0||u.charAt(0)==="#")continue;const c=u.indexOf(" ");let h=c>=0?u.substring(0,c):u;h=h.toLowerCase();let p=c>=0?u.substring(c+1):"";if(p=p.trim(),h==="newmtl")r={name:p},o[p]=r;else if(h==="ka"||h==="kd"||h==="ks"||h==="ke"){const f=p.split(i,3);r[h]=[parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2])]}else r[h]=p}const a=new Ks(this.resourcePath||s,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(o),a}}class Ks{constructor(t="",s={}){this.baseUrl=t,this.options=s,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:Se,this.wrap=this.options.wrap!==void 0?this.options.wrap:Fe}setCrossOrigin(t){return this.crossOrigin=t,this}setManager(t){this.manager=t}setMaterials(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(t){if(!this.options)return t;const s={};for(const n in t){const r=t[n],i={};s[n]=i;for(const o in r){let a=!0,l=r[o];const u=o.toLowerCase();switch(u){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&l[0]===0&&l[1]===0&&l[2]===0&&(a=!1);break}a&&(i[u]=l)}}return s}preload(){for(const t in this.materialsInfo)this.create(t)}getIndex(t){return this.nameLookup[t]}getAsArray(){let t=0;for(const s in this.materialsInfo)this.materialsArray[t]=this.create(s),this.nameLookup[s]=t,t++;return this.materialsArray}create(t){return this.materials[t]===void 0&&this.createMaterial_(t),this.materials[t]}createMaterial_(t){const s=this,n=this.materialsInfo[t],r={name:t,side:this.side};function i(a,l){return typeof l!="string"||l===""?"":/^https?:\/\//i.test(l)?l:a+l}function o(a,l){if(r[a])return;const u=s.getTextureParams(l,r),c=s.loadTexture(i(s.baseUrl,u.url));c.repeat.copy(u.scale),c.offset.copy(u.offset),c.wrapS=s.wrap,c.wrapT=s.wrap,(a==="map"||a==="emissiveMap")&&(c.colorSpace=kt),r[a]=c}for(const a in n){const l=n[a];let u;if(l!=="")switch(a.toLowerCase()){case"kd":r.color=$t.colorSpaceToWorking(new St().fromArray(l),kt);break;case"ks":r.specular=$t.colorSpaceToWorking(new St().fromArray(l),kt);break;case"ke":r.emissive=$t.colorSpaceToWorking(new St().fromArray(l),kt);break;case"map_kd":o("map",l);break;case"map_ks":o("specularMap",l);break;case"map_ke":o("emissiveMap",l);break;case"norm":o("normalMap",l);break;case"map_bump":case"bump":o("bumpMap",l);break;case"disp":o("displacementMap",l);break;case"map_d":o("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":u=parseFloat(l),u<1&&(r.opacity=u,r.transparent=!0);break;case"tr":u=parseFloat(l),this.options&&this.options.invertTrProperty&&(u=1-u),u>0&&(r.opacity=1-u,r.transparent=!0);break}}return this.materials[t]=new xe(r),this.materials[t]}getTextureParams(t,s){const n={scale:new oe(1,1),offset:new oe(0,0)},r=t.split(/\s+/);let i;return i=r.indexOf("-bm"),i>=0&&(s.bumpScale=parseFloat(r[i+1]),r.splice(i,2)),i=r.indexOf("-mm"),i>=0&&(s.displacementBias=parseFloat(r[i+1]),s.displacementScale=parseFloat(r[i+2]),r.splice(i,3)),i=r.indexOf("-s"),i>=0&&(n.scale.set(parseFloat(r[i+1]),parseFloat(r[i+2])),r.splice(i,4)),i=r.indexOf("-o"),i>=0&&(n.offset.set(parseFloat(r[i+1]),parseFloat(r[i+2])),r.splice(i,4)),n.url=r.join(" ").trim(),n}loadTexture(t,s,n,r,i){const o=this.manager!==void 0?this.manager:Le;let a=o.getHandler(t);a===null&&(a=new Ne(o)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const l=a.load(t,n,r,i);return s!==void 0&&(l.mapping=s),l}}const Ct={optenv(e,t){return e==="SPOT_ARM"?1:t},find(e){switch(e){case"r2_description":return"https://raw.githubusercontent.com/gkjohnson/nasa-urdf-robots/master/r2_description";case"staubli_resources":return"https://raw.githubusercontent.com/ros-industrial/staubli/indigo-devel/staubli_resources/";case"staubli_tx2_90_support":return"https://raw.githubusercontent.com/ros-industrial/staubli_experimental/ce422fe0a54232d73cf44e2571fc7abc2f5ff9f6/staubli_tx2_90_support/";case"spot_description":return"https://raw.githubusercontent.com/heuristicus/spot_ros/refs/heads/master/spot_description/";case"curiosity_mars_rover_description":return"https://raw.githubusercontent.com/gkjohnson/curiosity_mars_rover-mirror/master/curiosity_mars_rover_description/";default:return e}}};function ee(e){return new Promise((t,s)=>{const n=new Js;n.rospackCommands=Ct,n.load(e,t,s)})}function bt(e){return new Promise(t=>{e.onLoad=t})}function xt(e){const t=[];e.traverse(s=>{(s.isLight||s.isLineSegments)&&t.push(s)}),t.forEach(s=>{s.removeFromParent()})}async function Zs(){const e=new ht,t=bt(e),n=await ee("https://raw.githubusercontent.com/gkjohnson/curiosity_mars_rover-mirror/master/curiosity_mars_rover_description/urdf/curiosity_mars_rover.xacro"),r=new dt(e);r.packages=Ct.find;const i=r.parse(n);i.joints.arm_03_joint.limit.upper=Math.PI*3/2,i.rotation.set(-Math.PI/2,0,0),i.position.y-=.5,i.setJointValue("arm_02_joint",-Math.PI/2),i.setJointValue("arm_03_joint",Math.PI),i.setJointValue("arm_04_joint",Math.PI);const o=gt(i);mt(o,i),pt(o),o.clearDoF();const a=new Map,l=o.find(h=>h.name==="arm_tools"),u=i.links.arm_tools,c=new ft;return c.name=u.name,c.makeClosure(l),l.getWorldPosition(c.position),l.getWorldQuaternion(c.quaternion),c.setMatrixNeedsUpdate(),a.set(c,l),await t,xt(i),{ik:o,urdf:i,goalMap:a,helperScale:.3}}async function tr(){const e=new ht,t=bt(e),s="https://raw.githubusercontent.com/adubredu/DigitRobot.jl/refs/heads/main/urdf/digit_model.urdf",n=new dt(e);n.loadMeshCb=(a,l,u)=>{new Xs(l).loadAsync(a.replace(/.obj$/,".mtl")).then(c=>{c.preload(),new Gs(l).setMaterials(c).loadAsync(a).then(u)})},n.packages="https://raw.githubusercontent.com/adubredu/DigitRobot.jl/refs/heads/main/urdf";const r=await n.loadAsync(s);r.rotation.set(-Math.PI/2,0,0),r.setJointValue("hip_abduction_right",-.3),r.setJointValue("toe_pitch_joint_right",.1),r.setJointValue("hip_abduction_left",.3),r.setJointValue("toe_pitch_joint_left",-.1);const i=gt(r);mt(i,r),pt(i);const o=new Map;return["torso","left_toe_pitch","right_toe_pitch"].forEach(a=>{const l=i.find(c=>c.name===a),u=new ft;l.getWorldPosition(u.position),l.getWorldQuaternion(u.quaternion),u.makeClosure(l),o.set(u,l)}),await t,xt(r),{ik:i,urdf:r,goalMap:o,helperScale:.3}}async function er(){const e=new ht,t=bt(e),n=await ee("https://raw.githubusercontent.com/heuristicus/spot_ros/refs/heads/master/spot_description/urdf/spot.urdf.xacro"),r=new dt(e);r.packages=Ct.find;const i=r.parse(n);i.setJointValue("arm_joint1",Math.PI/2),i.setJointValue("arm_joint2",-Math.PI/2),i.setJointValue("arm_joint3",Math.PI/2),i.rotation.set(-Math.PI/2,0,0);const o=gt(i);mt(o,i),pt(o);const a=new Map;return["gripper","body"].forEach(l=>{const u=o.find(h=>h.name===l),c=new ft;u.getWorldPosition(c.position),u.getWorldQuaternion(c.quaternion),c.makeClosure(u),a.set(c,u)}),await t,xt(i),{ik:o,urdf:i,goalMap:a,helperScale:.3}}async function sr(){const e=new ht,t=bt(e),n=await ee("https://raw.githubusercontent.com/ros-industrial/staubli_experimental/ce422fe0a54232d73cf44e2571fc7abc2f5ff9f6/staubli_tx2_90_support/urdf/tx2_90.xacro"),r=new dt(e);r.packages=Ct.find;const i=r.parse(n);i.setJointValue("joint_2",Math.PI/4),i.setJointValue("joint_3",Math.PI/2),i.setJointValue("joint_5",-Math.PI/4),i.rotation.set(-Math.PI/2,0,0),i.position.y-=.5;const o=gt(i);o.clearDoF(),mt(o,i),pt(o);const a=new Map,l=o.find(h=>h.name==="tool0"),u=i.links.tool0,c=new ft;return c.name=u.name,c.makeClosure(l),l.getWorldPosition(c.position),l.getWorldQuaternion(c.quaternion),c.setMatrixNeedsUpdate(),a.set(c,l),await t,xt(i),{ik:o,urdf:i,goalMap:a,helperScale:.3}}async function rr(){const e=new ht,t=bt(e),r=await new dt(e).loadAsync("https://raw.githubusercontent.com/gkjohnson/urdf-loaders/master/urdf/T12/urdf/T12_flipped.URDF");r.rotation.set(Math.PI/2,0,0);for(let a=1;a<=6;a++)r.joints[`HP${a}`].setJointValue(30*L),r.joints[`KP${a}`].setJointValue(90*L),r.joints[`AP${a}`].setJointValue(-30*L);const i=gt(r);mt(i,r),pt(i);const o=new Map;return i.traverse(a=>{if(/^Foot/.test(a.name)){const l=r.links[a.name],u=new ft;u.name=l.name,u.makeClosure(a),a.getWorldPosition(u.position),a.getWorldQuaternion(u.quaternion),u.setMatrixNeedsUpdate(),o.set(u,a)}}),await t,xt(r),{ik:i,urdf:r,goalMap:o}}async function nr(){const e=new ht,t=bt(e),s="https://raw.githubusercontent.com/gkjohnson/nasa-urdf-robots/master/r2_description/robots/r2b.urdf",n=new dt(e);n.packages=Ct.find;const r=await n.loadAsync(s);r.rotation.set(-Math.PI/2,0,0),r.joints["r2/left_leg/joint3"].setJointValue(60*L),r.joints["r2/left_leg/joint5"].setJointValue(60*L),r.joints["r2/left_arm/joint1"].setJointValue(-80*L),r.joints["r2/left_arm/joint2"].setJointValue(-100*L),r.joints["r2/left_arm/joint3"].setJointValue(-90*L),r.joints["r2/left_arm/joint4"].setJointValue(90*L),r.joints["r2/right_leg/joint3"].setJointValue(60*L),r.joints["r2/right_leg/joint5"].setJointValue(60*L),r.joints["r2/right_arm/joint1"].setJointValue(-80*L),r.joints["r2/right_arm/joint2"].setJointValue(100*L),r.joints["r2/right_arm/joint3"].setJointValue(-90*L),r.joints["r2/right_arm/joint4"].setJointValue(-90*L);const i=gt(r);mt(i,r),pt(i);const o=new Map;return i.traverse(a=>{if(a.name==="r2/left_leg_foot"||a.name==="r2/right_leg_foot"){const l=r.links[a.name],u=new ft;u.name=l.name,u.makeClosure(a),a.getWorldPosition(u.position),a.getWorldQuaternion(u.quaternion),u.setMatrixNeedsUpdate(),o.set(u,a)}}),await t,xt(r),{ik:i,urdf:r,goalMap:o,helperScale:.2}}export{Ys as W,tr as a,sr as b,Zs as c,nr as d,rr as e,er as l};
